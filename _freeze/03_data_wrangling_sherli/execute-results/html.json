{
  "hash": "fbdbf352ba2280cf3f07e06dcf0b714a",
  "result": {
    "markdown": "#DATA WRANGLING CHALLENGE \n#NAME: SHERLIANA SETIAWAN - 534820 - CHEMICAL AND BIOPROCESS (M.Sc)\n#ALTERNATIVE 2 --> REDUCED DATA\n\n::: {.cell hash='03_data_wrangling_sherli_cache/html/unnamed-chunk-1_15fc013a1f816eb0de5dda66a8dddc80'}\n\n```{.r .cell-code}\n# LOAD LIBRARIES\n\nlibrary(vroom)\nlibrary(tictoc)\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.2     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.1     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ readr::col_character()   masks vroom::col_character()\n✖ readr::col_date()        masks vroom::col_date()\n✖ readr::col_datetime()    masks vroom::col_datetime()\n✖ readr::col_double()      masks vroom::col_double()\n✖ readr::col_factor()      masks vroom::col_factor()\n✖ readr::col_guess()       masks vroom::col_guess()\n✖ readr::col_integer()     masks vroom::col_integer()\n✖ readr::col_logical()     masks vroom::col_logical()\n✖ readr::col_number()      masks vroom::col_number()\n✖ readr::col_skip()        masks vroom::col_skip()\n✖ readr::col_time()        masks vroom::col_time()\n✖ readr::cols()            masks vroom::cols()\n✖ readr::date_names_lang() masks vroom::date_names_lang()\n✖ readr::default_locale()  masks vroom::default_locale()\n✖ dplyr::filter()          masks stats::filter()\n✖ readr::fwf_cols()        masks vroom::fwf_cols()\n✖ readr::fwf_empty()       masks vroom::fwf_empty()\n✖ readr::fwf_positions()   masks vroom::fwf_positions()\n✖ readr::fwf_widths()      masks vroom::fwf_widths()\n✖ dplyr::lag()             masks stats::lag()\n✖ readr::locale()          masks vroom::locale()\n✖ readr::output_column()   masks vroom::output_column()\n✖ readr::problems()        masks vroom::problems()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nlibrary(data.table)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'data.table'\n\nThe following objects are masked from 'package:lubridate':\n\n    hour, isoweek, mday, minute, month, quarter, second, wday, week,\n    yday, year\n\nThe following objects are masked from 'package:dplyr':\n\n    between, first, last\n\nThe following object is masked from 'package:purrr':\n\n    transpose\n\nThe following object is masked from 'package:tictoc':\n\n    shift\n```\n:::\n\n```{.r .cell-code}\n# SPECIFY COLUMNS TYPES\ncol_types <- list(\n  id = col_character(),\n  type = col_character(),\n  number = col_character(),\n  country = col_character(),\n  date = col_date(\"%Y-%m-%d\"),\n  abstract = col_character(),\n  title = col_character(),\n  kind = col_character(),\n  num_claims = col_double(),\n  filename = col_character(),\n  withdrawn = col_double()\n)\n\n# IMPORT DATA\npatent_tbl <- vroom(\n  file       = \"Patent_data_reduced/patent.tsv\", \n  delim      = \"\\t\", \n  col_types  = col_types,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: The following named parsers don't match the column names: type,\nnumber, country, abstract, title, kind, filename, withdrawn\n```\n:::\n\n```{.r .cell-code}\npatent_assignee_tbl <- vroom(\n  file       = \"Patent_data_reduced/patent_assignee.tsv\", \n  delim      = \"\\t\", \n  col_types  = col_types,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: The following named parsers don't match the column names: id, type,\nnumber, country, date, abstract, title, kind, num_claims, filename, withdrawn\n```\n:::\n\n```{.r .cell-code}\nassignee_tbl <- vroom(\n  file       = \"Patent_data_reduced/assignee.tsv\", \n  delim      = \"\\t\", \n  col_types  = col_types,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: The following named parsers don't match the column names: number,\ncountry, date, abstract, title, kind, num_claims, filename, withdrawn\n```\n:::\n\n```{.r .cell-code}\nuspc_tbl <- vroom(\n  file       = \"Patent_data_reduced/uspc.tsv\", \n  delim      = \"\\t\", \n  col_types  = col_types,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: The following named parsers don't match the column names: id, type,\nnumber, country, date, abstract, title, kind, num_claims, filename, withdrawn\n```\n:::\n\n```{.r .cell-code}\n# CONVERT DATA TO DATA.TABLE\nclass(assignee_tbl)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"spec_tbl_df\" \"tbl_df\"      \"tbl\"         \"data.frame\" \n```\n:::\n\n```{.r .cell-code}\nsetDT(assignee_tbl)\nclass(patent_assignee_tbl)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"spec_tbl_df\" \"tbl_df\"      \"tbl\"         \"data.frame\" \n```\n:::\n\n```{.r .cell-code}\nsetDT(patent_assignee_tbl)\nclass(patent_tbl)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"spec_tbl_df\" \"tbl_df\"      \"tbl\"         \"data.frame\" \n```\n:::\n\n```{.r .cell-code}\nsetDT(patent_tbl)\n\n\n## Question 1: Patent Dominance \n## What US Corporation has the most patent? List the 10 US corporation with the most assigned patents.\n\n### join data\ntic()\nQ1_patent_data_combined <- merge(x = patent_assignee_tbl, y = assignee_tbl, \n                       by.x=\"assignee_id\", by.y =\"id\",\n                       all.x = TRUE, \n                       all.y = FALSE)\ntoc()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n0.13 sec elapsed\n```\n:::\n\n```{.r .cell-code}\nsetkey(Q1_patent_data_combined, \"assignee_id\")\nkey(Q1_patent_data_combined)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"assignee_id\"\n```\n:::\n\n```{.r .cell-code}\nQ1_patent_data_combined %>% dim()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 315910      4\n```\n:::\n\n```{.r .cell-code}\nkeep_cols <- c(\"assignee_id\",\"patent_id\",\"organization\")\nQ1_patent_data_combined <- Q1_patent_data_combined[, ..keep_cols]\nQ1_patent_data_combined %>% dim()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 315910      3\n```\n:::\n\n```{.r .cell-code}\nQ1_patent_data_combined %>% glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 315,910\nColumns: 3\n$ assignee_id  <chr> \"org_004j997jM9yEdS7z4ReD\", \"org_004j997jM9yEdS7z4ReD\", \"…\n$ patent_id    <chr> \"8728438\", \"8921361\", \"8857791\", \"8845559\", \"8815936\", \"8…\n$ organization <chr> \"University of Basel\", \"University of Basel\", \"Zetkama Sp…\n```\n:::\n\n```{.r .cell-code}\ntic()\nCount_Q1<- Q1_patent_data_combined %>%\n  filter(!is.na(organization)) %>%\n  count(organization)%>% arrange(desc(n))\ntoc()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n0.59 sec elapsed\n```\n:::\n\n```{.r .cell-code}\nhead(Count_Q1,10)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                                   organization    n\n 1: International Business Machines Corporation 7547\n 2:               Samsung Electronics Co., Ltd. 5835\n 3:                      Canon Kabushiki Kaisha 4099\n 4:                            Sony Corporation 3326\n 5:                       Microsoft Corporation 3165\n 6:                                 Google Inc. 2668\n 7:                    Kabushiki Kaisha Toshiba 2656\n 8:                       QUALCOMM Incorporated 2597\n 9:                         LG Electronics Inc. 2459\n10:                       Panasonic Corporation 2218\n```\n:::\n:::\n\n## Answer for Question 1 --> International Business Machines Corporation has the most assigned patent with 7547 patents. \n## Top 10 is listed in the table \n\n-----------------------------------------------------------------------------------------------\n## Question 2: Recent Patent Activity \n## What US Corporation had the most patents granted in August 2014? List the 10 companies with the new granted patents for August 2014\n\n\n::: {.cell hash='03_data_wrangling_sherli_cache/html/unnamed-chunk-2_c237acac2ab04657bb31fab119be0670'}\n\n```{.r .cell-code}\nclass(patent_tbl)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"data.table\" \"data.frame\"\n```\n:::\n\n```{.r .cell-code}\nsetDT(patent_tbl)\n\ntic()\nQ2_patent_data_combined <- merge(x = patent_tbl, y = Q1_patent_data_combined, \n                        by.x=\"id\", by.y =\"patent_id\",\n                        all.x = TRUE, \n                        all.y = FALSE)\ntoc()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n0.58 sec elapsed\n```\n:::\n\n```{.r .cell-code}\n## Time frame --> 2014-08-01 - 2014-08-31 \n\nQ2_Aug2014_patent_data_combined<- with(Q2_patent_data_combined, Q2_patent_data_combined[(date >= \"2014-08-01\" & date <= \"2014-08-31\") ])\n\ntic()\nQ2_top_Aug2014 <- Q2_Aug2014_patent_data_combined %>%\n  filter(!is.na(organization)) %>%\n  count(organization)%>% arrange(desc(n))\ntoc()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n0.07 sec elapsed\n```\n:::\n\n```{.r .cell-code}\n#TOP US company with most patents in Aug 2014 \nhead(Q2_top_Aug2014,1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                                  organization   n\n1: International Business Machines Corporation 718\n```\n:::\n\n```{.r .cell-code}\n#Top 10 companies with most new granted patents in Aug 2014\nhead(Q2_top_Aug2014,10)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                                   organization   n\n 1: International Business Machines Corporation 718\n 2:               Samsung Electronics Co., Ltd. 524\n 3:                      Canon Kabushiki Kaisha 361\n 4:                       Microsoft Corporation 337\n 5:                            Sony Corporation 269\n 6:                                 Google Inc. 240\n 7:                       QUALCOMM Incorporated 223\n 8:                                  Apple Inc. 222\n 9:                    Kabushiki Kaisha Toshiba 213\n10:                         LG Electronics Inc. 211\n```\n:::\n\n```{.r .cell-code}\n## Answer for Question 2\n## 2.1. TOP US company with most patents in Aug 2014 --> International Business Machines Corporation with 718 granted patents in AUgust 2014\n## Top 10 companies is listed in the table \n```\n:::\n\n-------------------------------------------------------------------------------------------\n## Question 3: Innovation in Tech\n## What is the most innovative tech sector? For the top 10 companies worldwide with the most patents, what are the top 5 USPTO tech main classes? \n\n\n::: {.cell hash='03_data_wrangling_sherli_cache/html/unnamed-chunk-3_6633c2495f48ef0ed6bf7bbb9dc04baf'}\n\n```{.r .cell-code}\n### join data\ntic()\nQ3_patent_all <- merge(x = uspc_tbl, y = Q1_patent_data_combined, \n                       by.x=\"patent_id\", by.y =\"patent_id\",\n                       all.x = TRUE, \n                       all.y = FALSE)\ntoc()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n5.94 sec elapsed\n```\n:::\n\n```{.r .cell-code}\n#Most innovative class can be calculated by summing the total number of patents for each class\ntic()\nmostinnovative_class_Q3<- Q3_patent_all %>%\n  filter(!is.na(mainclass_id)) %>%\n  count(mainclass_id)%>% arrange(desc(n))\ntoc()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n0.38 sec elapsed\n```\n:::\n\n```{.r .cell-code}\n#making a data frame of TOP 10 companies to investigate the top 5 USPTO\nQ3_top10 <- Q3_patent_all[Q3_patent_all$organization %in% c('International Business Machines Corporation','Samsung Electronics Co., Ltd.','Canon Kabushiki Kaisha','Sony Corporation','Microsoft Corporation','Google Inc.','Kabushiki Kaisha Toshiba','QUALCOMM Incorporated','LG Electronics Inc.','Panasonic Corporation'),]\n\nQ3_top10$Company_Class <- paste(Q3_top10$organization, Q3_top10$mainclass_id)\n\n# calculate the company class\ntic()\nQ3_top10_CC<- Q3_top10 %>%\n  count(Company_Class)%>% arrange(desc(n))\ntoc()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n0.02 sec elapsed\n```\n:::\n\n```{.r .cell-code}\n#displaying the most innovative class and its corresponding number of patents of that class\nhead(mostinnovative_class_Q3,1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  mainclass_id     n\n1          257 42003\n```\n:::\n\n```{.r .cell-code}\n#Shows the top 5 USPTO Classes from the top 10 companies granted patents\nhead(Q3_top10_CC,5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                                    Company_Class    n\n1 International Business Machines Corporation 257 2397\n2                       QUALCOMM Incorporated 455 2226\n3               Samsung Electronics Co., Ltd. 257 2017\n4                       QUALCOMM Incorporated 370 1781\n5 International Business Machines Corporation 438 1742\n```\n:::\n\n```{.r .cell-code}\n#Answer for Question 3:\n## Most innovative class --> main class id 257 \n#TOP 5 USPTO Classes from top 10 companies: listed in the table\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}